
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Lab 8 - Form Submission &amp; BOM</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid="UA-154889698-1"
                  id="lab8"
                  title="Lab 8 - Form Submission &amp; BOM"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Introduction" duration="0">
        <p class="image-container"><img style="width: 464.50px" src="img\1aabf537858b7747.png"></p>
<h2 is-upgraded><strong>Even More Javascript</strong></h2>
<p>This is lab explores even more crucial functionalities of javascript, some of which you won&#39;t see in any other language</p>
<h2 is-upgraded><strong>Task 1</strong></h2>
<p>Just as in lab 1 follow the link below to open codesandbox. Fork the project then sign in.</p>
<p><a href="https://repl.it/@Snickdx/INFO-1601-Lab-8" target="_blank"><paper-button class="colored" raised>Open Lab 8</paper-button></a></p>


      </google-codelab-step>
    
      <google-codelab-step label="Set Interval &amp; Timeout" duration="0">
        <p><code>setInterval()</code> is a timing function whereby we can perform iteration but control the time interval between loops. It works by receiving a function and a number of milliseconds, the function would be called every time the specified number of milliseconds has passed.</p>
<h2 is-upgraded><strong>Task 2</strong></h2>
<p>Execute the following and observe the output.</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
  &lt;meta charset=&#34;UTF-8&#34;&gt;
  &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;
  &lt;meta http-equiv=&#34;X-UA-Compatible&#34; content=&#34;ie=edge&#34;&gt;
  &lt;title&gt;Document&lt;/title&gt;
   &lt;link href=&#34;https://fonts.googleapis.com/icon?family=Material+Icons&#34; rel=&#34;stylesheet&#34;&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css&#34;&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;span id=&#34;result&#34;&gt;&lt;/span&gt;&lt;br&gt;
  &lt;input type=&#34;button&#34; id=&#34;start&#34; onclick=&#34;startTimer()&#34; value=&#34;Start Timer&#34; /&gt;
  &lt;input type=&#34;button&#34; id=&#34;start&#34; value=&#34;End Timer&#34; /&gt;
  

  &lt;script&gt;
    let result = document.querySelector(&#39;#result&#39;);
    let timer;
    
    //print the current time to the dom
    function printDate(){
      result.innerHTML = new Date().toLocaleTimeString();
    }
    
    function startTimer(){
       //execute printDate() ever second
       timer =  setInterval(printDate, 1000);
    }

    function endTimer(){
      clearInterval(timer); // stops the timer
    }

  &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
<p class="image-container"><img style="width: 526.00px" src="img\241a320c4dbf16a.png"></p>
<p>If you need to run the function once after a delay <code>setTimeout()</code> can be used instead. The function would be executed once after the specified time in milliseconds has passed.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Form Validation" duration="0">
        <p>HTML 5 allows for some simple client side form validation without requiring any javascript at all!<br><br>Enter the following markup into <code>index.html</code> and try to submit the form with empty fileds, improper emails and unsafe passwords.<br></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&#34;en&#34;&gt;
&lt;head&gt;
  &lt;meta charset=&#34;UTF-8&#34;&gt;
  &lt;meta name=&#34;viewport&#34; content=&#34;width=device-width, initial-scale=1.0&#34;&gt;
  &lt;title&gt;Document&lt;/title&gt;
   &lt;link href=&#34;https://fonts.googleapis.com/icon?family=Material+Icons&#34; rel=&#34;stylesheet&#34;&gt;
    &lt;link rel=&#34;stylesheet&#34; href=&#34;https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css&#34;&gt;
&lt;/head&gt;
&lt;body&gt;
  
  
  &lt;div class=&#34;row&#34;&gt;
    &lt;form id=&#34;myForm&#34; class=&#34;col s12&#34; &gt;
      &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;input-field col s12&#34;&gt;
          &lt;input name=&#34;username&#34; type=&#34;text&#34; minlength=&#34;8&#34; required&gt;
          &lt;label for=&#34;username&#34;&gt;Username&lt;/label&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;input-field col s12&#34;&gt;
          &lt;input name=&#34;password&#34; type=&#34;password&#34;  required pattern=&#34;^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,}$&#34;&gt;
          &lt;label for=&#34;password&#34;&gt;Password&lt;/label&gt;
        &lt;/div&gt;
      &lt;/div&gt;
      &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;input-field col s12&#34;&gt;
          &lt;input name=&#34;email&#34; type=&#34;email&#34; required&gt;
          &lt;label for=&#34;email&#34;&gt;Email&lt;/label&gt;
        &lt;/div&gt;
      &lt;/div&gt;
                
      &lt;div class=&#34;row&#34;&gt;
        &lt;div class=&#34;col&#34;&gt;
          &lt;input type=&#34;submit&#34; class=&#34;btn waves-effect waves-light&#34; value=&#34;Sign Up&#34; required/&gt;
        &lt;/div&gt;
      &lt;/div&gt;
     
    &lt;/form&gt;
  &lt;/div&gt;
  &lt;script&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><br>The browser should prevent the form from submitting by displaying an error message instead.</p>
<p>This is done via validation attributes such as:</p>
<ul>
<li>required: field must contain a value</li>
<li>minlength : specifies the minimum length of valid input</li>
<li>type=email: field must contain a valid email address.</li>
<li>pattern: field must match with the specified <a href="https://www.thepolyglotdeveloper.com/2015/05/use-regex-to-test-password-strength-in-javascript/" target="_blank">Regular Expression</a>.</li>
</ul>
<p>The regular expression given to the password field would validate input if:</p>
<ul>
<li>It is at least 8 characters long</li>
<li>Contains an uppercase character</li>
<li>Contains a lowercase character</li>
<li>Contains a special character </li>
<li>Conans a number</li>
</ul>
<h2 is-upgraded><strong>Task 3</strong></h2>
<p>Edit <code>index.html</code> to complete the following:</p>
<ul>
<li>Add a textarea input element to the form using <a href="https://materializecss.com/text-inputs.html" target="_blank">materializecss</a> textarea example but do not include the outer &lt;div&gt; and &lt;form&gt; tags.</li>
<li>Change the label of the text area to &#34;comment&#34;</li>
<li>Name the textarea &#34;comment&#34;</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Form Submission" duration="0">
        <p>Now that the form input is valid we can send the data to an application server to be stored in a database. This will be done by performing another HTTP request but instead of <strong>getting</strong> data like in lab 6 we shall be <strong>posting</strong> data.</p>
<p>Firstly we shall implement a function called <code>submit()</code> which collects the data from a form.</p>
<p>The submit function is what we call an <strong>event handler</strong>. As it&#39;s intended to only be invoked in response to an event. In this case the event is the submission of the form. </p>
<pre><code>//the Event object is passed to any event handler called via an event attribute eg onclick, onsubmit etc
function submit(event){
 event.preventDefault();//prevents page redirection
     
 //event target returns the element on which the event is fired upon ie event.target === myForm

 //get data from form using elements property
 let myform = event.target.elements;

 let data = {
   username: myform[&#39;username&#39;].value,
   password: myform[&#39;password&#39;].value,
   email: myform[&#39;email&#39;].value
 }

 console.log(data);
}

//attach the submit function to the submit event of myForm    
document.forms[&#39;myForm&#39;].addEventListener(&#39;submit&#39;, submit);</code></pre>
<p><strong>Event handlers</strong> are often passed to HTML event attributes or addEventListener as <a href="https://guide.freecodecamp.org/javascript/callback-functions/" target="_blank"><strong>callback functions</strong></a>. In either case the <strong>event handler</strong> is passed an <a href="https://www.w3schools.com/jsref/dom_obj_event.asp" target="_blank"><strong>Event object</strong></a><strong> </strong>by the high order function (event attribute/ addEventListener). </p>
<p>Secondly, we implement a <code>postData()</code> function which performs an HTTP request to send the data to a server.</p>
<pre><code>async function postData(url, data){
  try{

     let response = await fetch(
       url, 
       {
            method: &#39;POST&#39;,
            body: JSON.stringify(data)
       },//convert data to JSON string
     );//1. Send http request and get response
     
     let result = await response.text();//2. Get message from response
     console.log(result);//3. Do something with the message
   
   }catch(error){
     console.log(error);//catch and log any errors
   }
}</code></pre>
<p>We can now update <code>submit()</code> to post the data to the following endpoint <a href="https://nmendezapps.firebaseio.com/users.json" target="_blank">https://nmendezapps.firebaseio.com/users.json</a>. The server at that url saves all data that is posted to it.</p>
<p>Update <code>submit()</code></p>
<pre><code>//the Event object is passed to any event handler called via an event attribute eg onclick, onsubmit etc
function submit(event){
 event.preventDefault();//prevents page redirection
     
 //event target returns the element on which the event is fired upon ie event.target === myForm

 //get data from form using elements property
 let myform = event.target.elements;

 let data = {
   username: myform[&#39;username&#39;].value,
   password: myform[&#39;password&#39;].value,
   email: myform[&#39;email&#39;].value
 }
 //send data to an api endpoint expecting the data
 postData(&#39;https://nmendezapps.firebaseio.com/users.json&#39;, data);
 myForm.reset();//clears the fields of the form
}

//attach the submit function to the submit event of myForm    
document.forms[&#39;myForm&#39;].addEventListener(&#39;submit&#39;, submit);</code></pre>
<p>Now submitting the form would cause the data you entered to be viewable at </p>
<p><a href="https://nmendezapps.firebaseio.com/users.json" target="_blank">https://nmendezapps.firebaseio.com/users.json</a> ! </p>
<h2 is-upgraded><strong>Task 4</strong></h2>
<ol type="1" start="1">
<li>Add code to capture data from the textarea from task 4 and send the data in the <code>submit()</code> function.</li>
<li>Experiment submitting data from other form controls like radio, checkbox etc.</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Accessing Styles, Classes &amp; Attributes" duration="0">
        <p>We can also retrieve and manipulate an element&#39;s styles, attributes and classes using javascript.</p>
<pre><code>let styles = myForm.style;
console.log(styles);//shows all the styles of the object
myForm.style.backgroundColor = &#39;lightgrey&#39;;

console.log(myForm.getAttribute(&#39;name&#39;));//myForm

let username = myForm.elements[&#39;username&#39;];
username.removeAttribute(&#39;maxlength&#39;);//removes an attribute
username.setAttribute(&#39;maxlength&#39;, 7);//add an attribute and value

myForm.classList.remove(&#39;s12&#39;);//removes a class
myForm.classList.add(&#39;s8&#39;);//adds a class

</code></pre>
<h2 is-upgraded><strong>Task 5</strong></h2>
<p>Write Javascript code to change the maxlength of the email field to 50.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Browser Object Model" duration="0">
        <p>While we have mentioned the Document Object Model which is the hierarchy of elements on a page, it is really just part of the wider Browser Object Model BOM. The BOM then forms part of the wider set of <a href="https://developer.mozilla.org/en-US/docs/Web/Reference/API" target="_blank">Web APIs</a> which allow us to tap into the wider features of the web.<br><br><img style="width: 624.00px" src="img\97e06fecae893cc9.png"><br><br>From the window object we can access other aspects of the browser as shown in the diagram above.</p>
<p>We can access browser objects such as document, location as a property of window e.g. window.location or call them directly as a global object e.g. <code>location.</code></p>
<h2 is-upgraded><strong>Task 6 </strong></h2>
<p>Execute the following and observe the output.</p>
<pre><code>//get client data using navigator
console.log(navigator.cookieEnabled);
console.log(navigator.online);
console.log(navigator.appVersion);
console.log(navigator.userAgent)
console.log(navigator.platform);

//get window metadata using window
console.log(window.location.href);//get full url
console.log(window.location.protocol);
console.log(window.location.hostname);

function redirect(url){
  window.location.assign(url);//redirects the page to another url
}

window.onload(function(event){
   console.log(&#34;Page has loaded&#34;);
   //do other javascript stuff here
})</code></pre>
<p>Using window.onload() is a pattern which can benefit the performance of the application. It will pause your javascript execution until the page has fully loaded.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Conclusion" duration="0">
        <p>Congratulations on making it to the end feel free to use these labs for javascript reference when building out your web applications.</p>
<h2 is-upgraded>References &amp; Additional Reading</h2>
<p><a href="https://medium.com/@reettikgoswami97/document-object-model-dom-c19d66abd235" target="_blank">BOM</a></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLFormElement/submit_event" target="_blank">Form Submission Event</a></p>
<p><a href="https://www.valentinog.com/blog/formdata/" target="_blank">Form Data</a></p>
<p><a href="https://www.w3schools.com/jsref/obj_window.asp" target="_blank">Window Object</a></p>
<p><a href="https://javascript.info/onload-ondomcontentloaded" target="_blank">Window Events</a></p>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>

</body>
</html>
